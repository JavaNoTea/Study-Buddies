{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Adamf/Documents/studyBuddy/StudyBuddy/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Adamf/Documents/studyBuddy/StudyBuddy/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Adamf/Documents/studyBuddy/StudyBuddy/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useContext}from'react';import{AuthContext}from'../useContext/LoginContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useContext=useContext(AuthContext),currentUser=_useContext.currentUser,setCurrentUser=_useContext.setCurrentUser;var app_name='cop-study-buddy-1000';function buildPath(route){if(process.env.NODE_ENV==='production'){return'https://'+app_name+'.herokuapp.com/'+route;}else{return'http://localhost:5000/'+route;}}var loginName;var loginPassword;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var doLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var obj,js,_js,login,password,response,res,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();obj={login:loginName.value,password:loginPassword.value};js=JSON.stringify(obj);console.log(obj);_context.prev=4;_js=_slicedToArray(js,2),login=_js[0],password=_js[1];console.log(login);console.log(password);console.log(js);_context.next=11;return fetch(buildPath('api/login'),{method:'POST',body:js,headers:{'Content-Type':'application/json'}});case 11:response=_context.sent;_context.t0=JSON;_context.next=15;return response.text();case 15:_context.t1=_context.sent;res=_context.t0.parse.call(_context.t0,_context.t1);console.log(res);if(res._id<=0){setMessage('User/Password combination incorrect');}else{user={firstName:res.firstName,lastName:res.lastName,id:res._id};console.log(user);setCurrentUser(user);localStorage.setItem('user_data',JSON.stringify(user));setMessage('Works');window.location.href='/';}_context.next=25;break;case 21:_context.prev=21;_context.t2=_context[\"catch\"](4);alert(_context.t2.toString());return _context.abrupt(\"return\");case 25:case\"end\":return _context.stop();}},_callee,null,[[4,21]]);}));return function doLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"loginDiv\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:doLogin,children:[/*#__PURE__*/_jsx(\"span\",{id:\"inner-title\",children:\"PLEASE LOG IN!\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"loginName\",placeholder:\"Username\",ref:function ref(c){return loginName=c;}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"loginPassword\",placeholder:\"Password\",ref:function ref(c){return loginPassword=c;}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",id:\"loginButton\",class:\"buttons\",value:\"Do It\",onClick:doLogin})]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){e.preventDefault();window.location.href='/register';},children:\"Dont have an account register!\"}),/*#__PURE__*/_jsx(\"span\",{id:\"loginResult\",children:message})]});};export default Login;","map":{"version":3,"names":["React","useState","useContext","AuthContext","jsx","_jsx","jsxs","_jsxs","Login","_useContext","currentUser","setCurrentUser","app_name","buildPath","route","process","env","NODE_ENV","loginName","loginPassword","_useState","_useState2","_slicedToArray","message","setMessage","doLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","obj","js","_js","login","password","response","res","user","wrap","_callee$","_context","prev","next","preventDefault","value","JSON","stringify","console","log","fetch","method","body","headers","sent","t0","text","t1","parse","call","_id","firstName","lastName","id","localStorage","setItem","window","location","href","t2","alert","toString","abrupt","stop","_x","apply","arguments","children","onSubmit","type","placeholder","ref","c","class","onClick","e"],"sources":["C:/Users/Adamf/Documents/studyBuddy/StudyBuddy/frontend/src/login_register/Login.js"],"sourcesContent":["import React, { useState , useContext} from 'react';\r\nimport { AuthContext } from '../useContext/LoginContext';\r\n\r\nfunction Login()\r\n{\r\n\r\n   const {currentUser, setCurrentUser} = useContext(AuthContext);\r\n\r\n const app_name = 'cop-study-buddy-1000'\r\n\r\nfunction buildPath(route)\r\n{\r\n    if (process.env.NODE_ENV === 'production')\r\n    {\r\n        return 'https://' + app_name +  '.herokuapp.com/' + route;\r\n    }\r\n    else\r\n    {\r\n        return 'http://localhost:5000/' + route;\r\n    }\r\n}\r\n\r\n  var loginName;\r\n    var loginPassword;\r\n\r\n    const [message,setMessage] = useState('');\r\n\r\n    const doLogin = async event => \r\n    {\r\n        event.preventDefault();\r\n\r\n        var obj = {login:loginName.value,password:loginPassword.value};\r\n        var js = JSON.stringify(obj);\r\n        console.log(obj);\r\n        try\r\n        {    \r\n          const [ login, password ] = js;\r\n\r\n          console.log(login);\r\n          console.log(password);\r\n          console.log(js)\r\n            const response = await fetch(buildPath('api/login'),\r\n                {method:'POST',body:js,headers:{'Content-Type': 'application/json'}});\r\n            \r\n\r\n            var res = JSON.parse(await response.text());\r\n            console.log(res)\r\n\r\n            if( res._id <= 0 )\r\n            {\r\n                setMessage('User/Password combination incorrect');\r\n            }\r\n            else\r\n            {\r\n                var user = {firstName:res.firstName,lastName:res.lastName,id:res._id}\r\n                console.log(user);\r\n                setCurrentUser(user);\r\n                localStorage.setItem('user_data', JSON.stringify(user));\r\n                \r\n                setMessage('Works');\r\n                window.location.href = '/';\r\n            }\r\n        }\r\n        catch(e)\r\n        {\r\n            alert(e.toString());\r\n            return;\r\n        }    \r\n    };\r\n\r\n    return(\r\n      <div id=\"loginDiv\">\r\n        <form onSubmit={doLogin}>\r\n        <span id=\"inner-title\">PLEASE LOG IN!</span><br />\r\n          <input type=\"text\" id=\"loginName\" placeholder=\"Username\" \r\n  ref={(c) => loginName = c} /><br />\r\n<input type=\"password\" id=\"loginPassword\" placeholder=\"Password\" \r\n  ref={(c) => loginPassword = c} /><br />\r\n        <input type=\"submit\" id=\"loginButton\" class=\"buttons\" value = \"Do It\"\r\n          onClick={doLogin} />\r\n        </form>\r\n        <button onClick={(e) => {e.preventDefault();window.location.href = '/register'}}>Dont have an account register!</button>\r\n      <span id=\"loginResult\">{message}</span>\r\n     </div>\r\n    );\r\n};\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}